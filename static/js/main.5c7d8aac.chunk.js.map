{"version":3,"sources":["components/DishCard/index.module.css","routes/Dishes/index.module.css","components/PollCard/index.module.css","components/PollRatings/index.module.css","routes/Login/index.js","utils.js","components/DishCard/index.js","components/PollCard/index.js","components/PollRatings/index.js","routes/Dishes/index.js","routes/Dishes/services/index.js","App.js","routes/Login/services/index.js","reportWebVitals.js","index.js"],"names":["module","exports","Login","useAuth","userName","onSubmit","password","setPassword","setUserName","isValid","isSubmit","className","type","name","placeholder","onChange","e","target","value","onClick","preventDefault","LocalStorage","ls","localStorage","getItem","JSON","parse","val","setItem","stringify","DishCard","description","dishName","image","handleUserSelection","selectedDishes","id","removeRating","isDisabled","Object","keys","length","cx","styles","container","disabled","header","imgContainer","src","alt","btnContainer","bind","rating","ratingContainer","PollCard","ratings","ranking","userRatings","goToHome","info","PollRatings","dishesList","getRatings","useState","sortedList","setSortedList","setUserRatings","useEffect","normaliseList","reduce","acc","dish","entries","forEach","key","values","sort","a","b","map","index","TABS","Dishes","dishes","setDishes","isLoading","setIsLoading","fetch","then","res","json","result","catch","useGetDishes","activeTab","setActiveTab","updateRating","pollData","usePollRatings","getDefaultSelection","userSection","setUserSelection","tabs","btn","isActive","getPage","temp","AuthContext","createContext","ProvideAuth","children","auth","validUsers","Users","history","useHistory","setIsValid","setIsSubmit","user","find","push","useLogin","Provider","App","exact","from","to","path","PrivateRoute","rest","render","location","pathname","state","useContext","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.5c7d8aac.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"DishCard_container__2whUv\",\"disabled\":\"DishCard_disabled__2oLmB\",\"header\":\"DishCard_header__19xL5\",\"imgContainer\":\"DishCard_imgContainer__1wSUh\",\"btnContainer\":\"DishCard_btnContainer__j2K7v\",\"ratingContainer\":\"DishCard_ratingContainer__12nyB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Dishes_container__19TOk\",\"tabs\":\"Dishes_tabs__1ujpd\",\"btn\":\"Dishes_btn__2JrZo\",\"isActive\":\"Dishes_isActive__DM87E\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PollCard_container__x1ntW\",\"header\":\"PollCard_header__eDK1Q\",\"ratings\":\"PollCard_ratings__15FEe\",\"imgContainer\":\"PollCard_imgContainer__2qdDW\",\"info\":\"PollCard_info__2yYe3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"PollRatings_container__vTA5i\"};","import { useAuth } from '../../App';\r\nimport './index.css';\r\n\r\nfunction Login() {\r\n    const { userName, onSubmit, password, setPassword, setUserName, isValid , isSubmit} = useAuth();\r\n\r\n    return (\r\n        <div className=\"container\">\r\n            <div className=\"ui centered grid container\">\r\n                <div className=\"nine wide column\">\r\n                    <div className=\"ui fluid card\">\r\n                        <div className=\"content\">\r\n                            <form className=\"ui form\">\r\n                                <div className=\"field\">\r\n                                    <label>Username</label>\r\n                                    <input type=\"text\" name=\"user\" placeholder=\"Username\" onChange={handleUserName} value={userName} />\r\n                                </div>\r\n                                <div className=\"field\">\r\n                                    <label>Password</label>\r\n                                    <input type=\"password\" name=\"pass\" placeholder=\"Password\" onChange={handlePassword} value={password} />\r\n                                </div>\r\n                                <button className=\"ui primary labeled icon button\" onClick={handleOnSubmit}>\r\n                                    <i className=\"unlock alternate icon\"></i>\r\n                                      Login\r\n                                </button>\r\n                                {!isValid && isSubmit ? (\r\n                                    <div className=\"error\">\r\n                                        <div className=\"ui red basic label\">\r\n                                            Invalid Username or Password\r\n                                        </div>\r\n                                    </div>\r\n                                ) : null}\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n    function handleUserName(e) {\r\n        setUserName(e.target.value);\r\n    }\r\n\r\n    function handlePassword(e) {\r\n        setPassword(e.target.value);\r\n    }\r\n\r\n    function handleOnSubmit(e) {\r\n        onSubmit();\r\n        e.preventDefault();\r\n    }\r\n}\r\n\r\nexport default Login;\r\n","const LocalStorage = {\r\n    get: function(name) {\r\n        const ls = localStorage.getItem(name);\r\n        if(ls) {\r\n            return JSON.parse(ls)\r\n        } return null;\r\n    },\r\n    set: function(name, val) {\r\n        localStorage.setItem(name, JSON.stringify(val))\r\n    }\r\n}\r\n\r\nexport {\r\n    LocalStorage,\r\n}\r\n","import cx from 'classnames';\r\n\r\nimport styles from './index.module.css';\r\n\r\nfunction DishCard({ description, dishName, image, handleUserSelection, selectedDishes, id, removeRating }) {\r\n        const isDisabled = Object.keys(selectedDishes).length > 2 && !selectedDishes[id]\r\n    return (\r\n        <div data-testid={`dishCard-${id}`} className={cx(styles.container, {\r\n            [styles.disabled]: isDisabled\r\n        })}>\r\n            <h1 className={styles.header}>{dishName}</h1>\r\n            <figure className={styles.imgContainer}>\r\n                <img src={image} alt={dishName} />\r\n            </figure>\r\n            <div className=\"ui info message\">\r\n                <div className=\"header\">\r\n                    {description}\r\n                </div>\r\n            </div>\r\n            <div className={styles.btnContainer}>\r\n                <div className=\"ui buttons\">\r\n                    <button\r\n                        className=\"ui button\"\r\n                        onClick={handleUserSelection.bind(null, { id, rating: 1 })}\r\n                        disabled={isDisabled}\r\n                    >\r\n                        Rank 1\r\n                </button>\r\n                    <button\r\n                        className=\"ui button\"\r\n                        onClick={handleUserSelection.bind(null, { id, rating: 2 })}\r\n                        disabled={isDisabled}\r\n                    >\r\n                        Rank 2\r\n                </button>\r\n                    <button\r\n                        className=\"ui button\"\r\n                        onClick={handleUserSelection.bind(null, { id, rating: 3 })}\r\n                        disabled={isDisabled}\r\n                    >\r\n                        Rank 3</button>\r\n                </div>\r\n            </div>\r\n            {\r\n                selectedDishes[id] ? (\r\n                    <div className={styles.ratingContainer}>\r\n                        <div className=\"ui green message\">\r\n                            <div className=\"header\">\r\n                                {`You ranked ${selectedDishes[id]}`}\r\n                            </div>\r\n                        </div>\r\n                        <button className=\"ui negative button\" onClick={removeRating.bind(null, id)}>Remove Rating</button>\r\n                    </div>\r\n                ) : null\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default DishCard;\r\n","import styles from './index.module.css';\r\n\r\nfunction PollCard({ ratings, dishName, image, id, ranking, userRatings, goToHome }) {\r\n    return (\r\n        <div data-testid=\"pollCard\" className={styles.container}>\r\n            <h1 className={styles.header}>{dishName}</h1>\r\n            <h2 className={styles.ratings}>{`Ranking ${ranking + 1}`}</h2>\r\n            <figure className={styles.imgContainer}>\r\n                <img src={image} alt={dishName} />\r\n            </figure>\r\n            <div className={styles.info}>\r\n                <div className=\"ui olive message\">\r\n                    <div className=\"header\">{`Total Score: ${ratings}`}</div>\r\n                </div>\r\n                {userRatings[id] ? (\r\n                    <div>\r\n                        <div className=\"ui orange message\">\r\n                        <div className=\"header\">{`You rated this dish as ${userRatings[id]}`}</div>\r\n                        </div>\r\n                        <button className=\"ui secondary button\" onClick={goToHome}>Edit</button>\r\n                    </div>\r\n                ) : null}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default PollCard;\r\n","import { useEffect, useState } from 'react';\r\n\r\nimport { useAuth } from '../../App';\r\n\r\nimport PollCard from '../PollCard';\r\n\r\nimport styles from './index.module.css';\r\n\r\nfunction PollRatings({ dishesList, getRatings, goToHome }) {\r\n    const { userName } = useAuth();\r\n    const [sortedList, setSortedList] = useState([]);\r\n    const [userRatings, setUserRatings] = useState({});\r\n    useEffect(() => {\r\n        const ratings = getRatings();\r\n        const normaliseList = dishesList.reduce((acc, dish) => ({\r\n            ...acc,\r\n            [dish.id]: {\r\n                ...dish,\r\n                ratings: 0,\r\n            }\r\n        }), {});\r\n        Object.entries(ratings).forEach(([key, value]) => {\r\n            if (key === userName) {\r\n                setUserRatings(value);\r\n            }\r\n            Object.entries(value).forEach(([dish, rating]) => {\r\n                if (rating === 3)\r\n                    normaliseList[dish].ratings = normaliseList[dish].ratings + 10;\r\n                if (rating === 2)\r\n                    normaliseList[dish].ratings = normaliseList[dish].ratings + 20;\r\n                if (rating === 1)\r\n                    normaliseList[dish].ratings = normaliseList[dish].ratings + 30;\r\n            })\r\n        })\r\n        setSortedList(Object.values(normaliseList).sort((a, b) => b.ratings - a.ratings))\r\n    }, [dishesList, getRatings, userName])\r\n\r\n    return (\r\n        <div data-testid=\"pollRatings\" className={styles.container}>\r\n            {sortedList.map((dish, index) => (\r\n                <PollCard\r\n                    key={dish.id}\r\n                    ranking={index}\r\n                    userRatings={userRatings}\r\n                    goToHome={goToHome}\r\n                    {...dish}\r\n                />\r\n            ))}\r\n        </div>\r\n    )\r\n\r\n}\r\nexport default PollRatings;\r\n","import { useState } from 'react';\r\nimport cx from 'classnames';\r\n\r\nimport { useGetDishes, usePollRatings } from './services';\r\nimport { useAuth } from '../../App';\r\n\r\nimport DishCard from '../../components/DishCard';\r\nimport PollRatings from '../../components/PollRatings';\r\n\r\nimport styles from './index.module.css';\r\n\r\nconst TABS = {\r\n    HOME: 'HOME',\r\n    POLL: 'POLL'\r\n}\r\n\r\nfunction Dishes() {\r\n    const { isLoading, dishes } = useGetDishes();\r\n    const [activeTab, setActiveTab] = useState(TABS.HOME)\r\n\r\n    const { updateRating, getRatings } = usePollRatings();\r\n    const { userName } = useAuth();\r\n\r\n    const [userSection, setUserSelection] = useState(getDefaultSelection());\r\n\r\n    if(isLoading) {\r\n        return <div>Loading...</div>\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <div className={styles.tabs}>\r\n                <button\r\n                    className={cx(styles.btn, {\r\n                        [styles.isActive]: activeTab === TABS.HOME\r\n                    })}\r\n                    onClick={setActiveTab.bind(null, TABS.HOME)}\r\n                >\r\n                    Home\r\n                </button>\r\n                <button\r\n                    className={cx(styles.btn, {\r\n                        [styles.isActive]: activeTab === TABS.POLL\r\n                    })}\r\n                    onClick={setActiveTab.bind(null, TABS.POLL)}\r\n                >\r\n                    Poll\r\n                </button>\r\n            </div>\r\n            {getPage()}\r\n        </>\r\n    )\r\n\r\n    function getPage() {\r\n        if(activeTab === TABS.HOME) {\r\n            return (\r\n                <div className={styles.container}>\r\n                    {\r\n                        dishes.map(dish => (\r\n                            <DishCard\r\n                                key={dish.id}\r\n                                handleUserSelection={handleUserSelection}\r\n                                selectedDishes={userSection}\r\n                                removeRating={removeRating}\r\n                                {...dish} />\r\n                        ))\r\n                    }\r\n                </div>\r\n            )\r\n        }\r\n\r\n        return (\r\n            <PollRatings dishesList={dishes} getRatings={getRatings} goToHome={setActiveTab.bind(null, TABS.HOME)}/>\r\n        )\r\n    }\r\n\r\n    function handleUserSelection({ id, rating }) {\r\n        const temp = {...userSection }\r\n        Object.entries(temp).forEach(([key, value]) => {\r\n            if (value === rating) {\r\n                delete temp[key]\r\n            }\r\n        })\r\n        temp[id] = rating;\r\n        setUserSelection(temp);\r\n        updateRating(temp);\r\n    }\r\n\r\n    function removeRating(id) {\r\n        const temp = { ...userSection };\r\n        delete temp[id];\r\n        setUserSelection(temp);\r\n        updateRating(temp);\r\n    }\r\n\r\n    function getDefaultSelection() {\r\n        const ratings = getRatings();\r\n        return ratings[userName] ? ratings[userName] : {}\r\n    }\r\n}\r\n\r\nexport default Dishes;\r\n","import { useEffect, useState } from 'react';\r\n\r\nimport { LocalStorage } from '../../../utils';\r\nimport {useAuth} from '../../../App';\r\n\r\nfunction useGetDishes() {\r\n    const [dishes, setDishes] = useState([]);\r\n    const [isLoading, setIsLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        setIsLoading(true);\r\n        fetch('https://raw.githubusercontent.com/syook/react-dishpoll/main/db.json')\r\n            .then( res => res.json().then(result => {\r\n                setDishes(result);\r\n                setIsLoading(false);\r\n            })).catch(() => {\r\n                setIsLoading(false);\r\n        })\r\n    }, [])\r\n    return {\r\n        isLoading,\r\n        dishes,\r\n    }\r\n}\r\n\r\nfunction usePollRatings() {\r\n    const { userName } = useAuth()\r\n    function updateRating(ratings) {\r\n        let pollData = LocalStorage.get('pollRatings') || {};\r\n        pollData[userName] = ratings;\r\n        LocalStorage.set('pollRatings', pollData);\r\n    }\r\n    function getRatings() {\r\n        return LocalStorage.get('pollRatings') || {}\r\n    }\r\n    return {\r\n        updateRating,\r\n        getRatings,\r\n    }\r\n}\r\n\r\nexport {\r\n    useGetDishes,\r\n    usePollRatings,\r\n}\r\n","import { useContext, createContext } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect,\n} from \"react-router-dom\";\n\nimport { useLogin } from './routes/Login/services';\n\nimport Login from './routes/Login';\nimport Dishes from './routes/Dishes';\nimport './App.css'\n\nconst AuthContext = createContext({});\n\nfunction ProvideAuth({ children }) {\n    const auth = useLogin();\n    return (\n        <AuthContext.Provider value={{ ...auth }}>\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport default function App() {\n    return (\n        <Router>\n            <ProvideAuth>\n                    <div>\n                        <Switch>\n                            <Redirect exact from=\"/\" to=\"login\" />\n                            <Route path=\"/login\">\n                                <Login />\n                            </Route>\n                            <PrivateRoute path=\"/dishes\">\n                                <Dishes />\n                            </PrivateRoute>\n                        </Switch>\n                    </div>\n            </ProvideAuth>\n        </Router>\n    )\n}\n\nfunction PrivateRoute({ children, ...rest }) {\n    const { isValid } = useAuth();\n    return (\n        <Route\n            {...rest}\n            render={({ location }) =>\n                isValid ? (\n                    children\n                ) : (\n                    <Redirect\n                        to={{\n                            pathname: \"/login\",\n                            state: { from: location }\n                        }}\n                    />\n                )\n            }\n        />\n    );\n}\n\nexport function useAuth() {\n    return useContext(AuthContext);\n}\n","import { useState } from 'react';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nimport Users from '../../../statics/users.json'\r\n\r\nfunction useLogin() {\r\n    const validUsers = Users\r\n    const history = useHistory();\r\n    const [userName, setUserName] = useState('');\r\n    const [password, setPassword] = useState('');\r\n    const [isValid, setIsValid] = useState(false);\r\n    const [isSubmit, setIsSubmit] = useState(false);\r\n\r\n    return {\r\n        userName,\r\n        setUserName,\r\n        password,\r\n        setPassword,\r\n        isValid,\r\n        isSubmit,\r\n        onSubmit,\r\n    }\r\n\r\n    function onSubmit() {\r\n        setIsSubmit(true);\r\n        const user = validUsers.find(user => user.userName === userName);\r\n        if(user && user.password === password) {\r\n            setIsValid(true)\r\n            history.push('/dishes')\r\n        } else {\r\n            setIsValid(false);\r\n        }\r\n    }\r\n}\r\n\r\nexport {\r\n    useLogin\r\n}\r\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}